<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Chicago highlights</title>
    {% block stylesheets %}
        {{ encore_entry_link_tags('app') }}
    {% endblock %}

    {% block javascripts %}
        {{ encore_entry_script_tags('app') }}
    {% endblock %}
</head>
<body>
{% if form is defined %}
    <div class="modal modal-alert position-static d-block bg-secondary py-5" tabindex="-1" role="dialog" id="modalChoice">
        <div class="modal-dialog" role="document">
            <div class="modal-content rounded-3 shadow">
                <div class="modal-body p-4 text-center">
                    {{ form_start(form) }}
                    {{ form_rest(form) }}
                    {{ form_end(form) }}
                </div>
            </div>
        </div>
    </div>
{% else %}
<div class="accordion" id="books">
    <div class="accordion-item">
        {% for bookId, highlights in bookHighlights %}
            <h2 class="accordion-header sticky-top d-flex" id="{{ bookId }}Button">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target=".{{ bookId }}-collapse" aria-expanded="true" aria-controls="{{ bookId }}">
                    {{ highlights[0].book }}- {{ highlights[0].author }}
                </button>
                <label for="selected-{{ bookId }}" class="btn btn-danger rounded-0 {{ bookId }}-collapse collapse">Hide/show selected</label>
            </h2>
            <input type="checkbox" id="selected-{{ bookId }}" class="d-none toggle-selected">
            <div id="{{ bookId }}" class="accordion-collapse collapse {{ bookId }}-collapse" aria-labelledby="{{ bookId }}Button" data-bs-parent="#books">
                <div class="accordion-body">
                    <div id="{{ bookId }}" class="list-group list-group-checkable d-grid gap-2 border-0 w-auto">
                        {% for highlight in highlights %}
                            <input class="list-group-item-check pe-none d-none" type="checkbox" name="highlight" id="{{ highlight.id }}" value="{{ highlight.id }}">
                            <label class="list-group-item rounded-3 py-3" for="{{ highlight.id }}">
                                <span></span>
                                <figure>
                                    <blockquote class="blockquote">
                                        {{ highlight.text }}
                                    </blockquote>
                                    <figcaption class="blockquote-footer">
                                        <cite title="{{  highlight.source }}">{{  highlight.source }}</cite>
                                        {% if highlight.note %}
                                            <p class="alert alert-info">{{ highlight.note.text }}</p>
                                        {% endif %}
                                    </figcaption>
                                </figure>
                            </label>
                        {% endfor %}
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
</div>
{% endif %}
</body>
</html>
